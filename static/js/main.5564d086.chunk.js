(this.webpackJsonpexample=this.webpackJsonpexample||[]).push([[0],{47:function(t,e,r){},48:function(t,e,r){},49:function(t,e,r){},50:function(t,e,r){},51:function(t,e,r){},52:function(t,e,r){"use strict";r.r(e);var n,o,i,a,c,s,l=r(1),u=r(26),d=r(17),b=r(4),h=r(6),f=r(22),p=r(11),g=r(7),v=r(2),O=function(t){var e=t.className;return Object(v.jsx)(j,{className:e,children:Object(v.jsx)(m,{children:Object(v.jsx)(w,{to:"/",exact:!0,activeClassName:"current",children:"Front page"})})})},j=g.a.div(n||(n=Object(h.a)(["\n  background: var(--color-primary);\n  box-shadow: 0 0 2px 2px rgba(0,0,0,0.18);\n  padding: 1rem;\n"]))),m=g.a.nav(o||(o=Object(h.a)(["\n  align-items: center;\n  color: #fff;\n  display: flex;\n"]))),w=Object(g.a)(d.b)(i||(i=Object(h.a)(["\n  box-sizing: border-box;\n  color: #fff;\n  cursor: pointer;\n  font-size: 1rem;\n  padding: 0.5rem 1rem;\n  text-decoration: none;\n  transition: 0.2s hover;\n  &:hover {\n    text-decoration: underline;\n  }\n  &.current {\n    font-weight: 600;\n  }\n"]))),x=["component"],M=function(t){var e,r=t.component,n=Object(f.a)(t,x);return Object(v.jsx)(b.b,Object(p.a)(Object(p.a)({},n),{},{render:(e=r,function(t){return Object(v.jsxs)(k,{children:[Object(v.jsx)(O,Object(p.a)({},t)),Object(v.jsx)(y,{children:Object(v.jsx)(e,Object(p.a)({},t))})]})})}))},k=g.a.div(a||(a=Object(h.a)(["\n  min-height: 100vh;\n"]))),y=g.a.main(c||(c=Object(h.a)(["\n  margin: 40px auto 0 auto;\n  max-width: 800px;\n  padding-bottom: 20px;\n  @media only screen and (max-width: 720px) {\n    margin: 40px 20px 0 20px;\n    padding-bottom: 20px;\n  }\n"]))),D=r(31),S=r.n(D),_=r(35),E=r(18),A=r(19),R=r(3),N=function(){function t(){Object(E.a)(this,t),this._view=void 0}return Object(A.a)(t,[{key:"init",value:function(t){this._view=t}},{key:"view",get:function(){if(!this._view)throw Error("EditorViewProvider view accessed without EditorView instance");return this._view}},{key:"execCommand",value:function(t){t(this.view.state,this.view.dispatch),this.focus()}},{key:"focus",value:function(){return!(!this._view||this._view.hasFocus())&&(this._view.focus(),this._view.dispatch(this._view.state.tr.scrollIntoView()),!0)}},{key:"stateToJSON",value:function(){var t=this.view.state.toJSON();return Object(p.a)(Object(p.a)({},t),{},{plugins:[]})}},{key:"hydrateStateFromJSON",value:function(t){var e=R.b.fromJSON({schema:this.view.state.schema,plugins:this.view.state.plugins},t);this.view.updateState(e),this.view.dispatch(this.view.state.tr)}},{key:"replaceState",value:function(t){this.view.updateState(t),this.view.dispatch(this.view.state.tr)}}]),t}(),C=function(){return{viewProvider:new N}},P=Object(l.createContext)(C()),J=function(){return Object(l.useContext)(P)};function T(){var t=J().viewProvider;return Object(v.jsxs)(q,{children:[Object(v.jsx)("button",{onClick:function(){t.execCommand((function(t,e){var r=t.schema.nodes.table.create({},Array.from([1,2,3,4],(function(){return t.schema.nodes.table_row.create({},[t.schema.nodes.table_cell.create(),t.schema.nodes.table_cell.create()])})));return e&&e(t.tr.insert(1,r)),!0}))},children:"Create broken node"}),Object(v.jsx)("button",{onClick:function(){t.execCommand((function(t,e){var r=t.schema.nodes.table.createAndFill();return e&&e(t.tr.insert(1,r)),!0}))},children:"Create node"}),Object(v.jsx)("button",{onClick:function(){t.execCommand((function(t,e){return e&&e(t.tr.delete(0,t.doc.nodeSize-2)),!0}))},children:"Reset"})]})}var V,F,q=g.a.div(s||(s=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  button {\n    margin: 0.05rem;\n  }\n"]))),z=Object(A.a)((function t(){var e=this;Object(E.a)(this,t),this.viewProvider=void 0,this.currentEditorState=void 0,this.STORAGE_KEY="editor-store",this.setEditorView=function(t){e.viewProvider=t,e.currentEditorState&&t.hydrateStateFromJSON(e.currentEditorState)},this.syncCurrentEditorState=function(){var t=e.viewProvider.stateToJSON();localStorage.setItem(e.STORAGE_KEY,JSON.stringify(t))};var r=localStorage.getItem(this.STORAGE_KEY);if(r&&null!==r&&r.length>0){var n=JSON.parse(r);this.currentEditorState=n}})),G=r(34),I=function(t){var e=t;return{celltype:e.tagName.toLowerCase(),colspan:Number(e.getAttribute("colspan")||1),rowspan:Number(e.getAttribute("rowspan")||1),placeholder:e.getAttribute("data-placeholder-text")||""}},K=new(r(0).h)({nodes:{doc:{content:"block+"},paragraph:{attrs:{makeMeRed:{default:null}},content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(t){return["p",{style:t.attrs.makeMeRed?"background: red;":void 0},0]}},blockquote:{attrs:{makeMeRed:{default:null}},content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(t){return["blockquote",{style:t.attrs.makeMeRed?"background: red;":void 0},0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){var e=t;return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(t){var e=t.attrs;return["img",{src:e.src,alt:e.alt,title:e.title}]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},table:{content:"table_colgroup? table_body",tableRole:"table",isolating:!0,group:"block",selectable:!1,parseDOM:[{tag:"table"}],toDOM:function(){return["table",0]}},table_body:{content:"table_row{3,}",group:"block",tableRole:"tbody",parseDOM:[{tag:"tbody"}],toDOM:function(){return["tbody",0]}},table_colgroup:{content:"table_col+",group:"block",tableRole:"colgroup",parseDOM:[{tag:"colgroup"}],toDOM:function(){return["colgroup",0]}},table_row:{content:"table_cell+",tableRole:"row",parseDOM:[{tag:"tr",priority:80}],toDOM:function(){return["tr",0]}},table_cell:{content:"inline*",attrs:{celltype:{default:"td"},colspan:{default:1},rowspan:{default:1}},tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:I},{tag:"th",getAttrs:I}],toDOM:function(t){var e=t,r={},n=e.attrs.celltype;return e.attrs.colspan&&1!==e.attrs.colspan&&(r.colspan=String(e.attrs.colspan)),e.attrs.rowspan&&1!==e.attrs.rowspan&&(r.rowspan=String(e.attrs.rowspan)),[n,r,0]}},table_col:{attrs:{width:{default:""}},group:"block",tableRole:"col",parseDOM:[{tag:"col",getAttrs:function(t){return{width:t.getAttribute("width")}}}],toDOM:function(t){var e=t,r={};return e.attrs.width&&(r.width=e.attrs.width),["col",r]}}},marks:{link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){var e=t;return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:function(t){var e=t.attrs;return["a",{href:e.href,title:e.title},0]}},italic:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}},bold:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!=t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong",0]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}},strikethrough:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"},{style:"text-decoration-line=line-through"}],toDOM:function(){return["s"]}}}});r(47),r(48),r(49),r(50);function Y(t){var e=t.className,r=void 0===e?"":e,n=Object(l.useRef)(null),o=Object(l.useRef)(null),i=J();function a(e){if(o.current){var r=o.current.state.apply(e);o.current.updateState(r),t.onEdit&&t.onEdit(r)}}return Object(l.useLayoutEffect)((function(){var e=R.b.create({schema:K,plugins:[]}),r=n.current;return r&&(o.current=function(t,e){var r=new G.a({mount:t},{state:e,dispatchTransaction:a});window&&(window.editorView=r);return r}(r,e),i.viewProvider.init(o.current),t.onEditorReady&&(null===t||void 0===t||t.onEditorReady(i))),function(){var t;null===(t=o.current)||void 0===t||t.destroy()}}),[]),Object(v.jsx)("div",{ref:n,className:r})}function L(){var t=Object(l.useMemo)((function(){return C()}),[]),e=Object(l.useMemo)((function(){return new z}),[]),r=Object(l.useMemo)((function(){return S()(e.syncCurrentEditorState,500)}),[]);return Object(v.jsx)(P.Provider,{value:t,children:Object(v.jsx)("div",{children:Object(v.jsxs)(B,{children:[Object(v.jsx)($,{children:Object(v.jsx)("div",{className:"pm-editor",children:Object(v.jsx)(Y,{onEdit:function(){r()},onEditorReady:function(t){e.setEditorView(t.viewProvider),Object(_.a)(t.viewProvider.view)}})})}),Object(v.jsx)(T,{})]})})})}var W,B=g.a.div(V||(V=Object(h.a)(["\n  display: grid;\n  grid-template-columns: 2fr 1fr;\n  grid-template-rows: auto auto;\n  margin-top: 1rem;\n"]))),$=g.a.div(F||(F=Object(h.a)(["\n  margin-right: 1rem;\n"])));function H(){return Object(v.jsxs)(Q,{children:[Object(v.jsxs)("header",{children:[Object(v.jsx)("h1",{children:Object(v.jsx)("a",{href:"https://teemukoivisto.github.io/prosemirror-schema-not-enforced-bug/",children:"ProseMirror schema is not enforced on node creation"})}),Object(v.jsx)("p",{children:"This can create quite devious bugs..."}),Object(v.jsx)("p",{children:Object(v.jsx)("a",{href:"https://github.com/TeemuKoivisto/prosemirror-schema-not-enforced-bug",children:"Github repo"})})]}),Object(v.jsx)(L,{})]})}var Q=g.a.div(W||(W=Object(h.a)([""]))),U=function(){return Object(v.jsx)(d.a,{basename:"/prosemirror-schema-not-enforced-bug",children:Object(v.jsxs)(b.d,{children:[Object(v.jsx)(M,{exact:!0,path:"/",component:H}),Object(v.jsx)(b.a,{to:"/"})]})})};r(51);Object(u.render)(Object(v.jsx)(U,{}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.5564d086.chunk.js.map